<div align="center">
  <a href="./v1.0.md">English</a> | <strong>Русский</strong>
</div>
<hr>

# Спецификация Pixel-Canon v1.0

## 1. Введение

Этот документ определяет формальную спецификацию для Pixel-Canon — стандарта для описания логической топологии и ориентации плотных N-мерных массивов, представляющих данные изображений. Цель — предоставить однозначный, декларативный и совместимый между языками способ описания структуры данных изображений в памяти.

## 2. Руководящие принципы

*   **Декларативность:** Пользователь *описывает* структуру, а не пишет код для её разбора.
*   **Явное превыше неявного:** Все аспекты структуры определяются явно для устранения догадок.
*   **Фокус на логической топологии:** Спецификация описывает, как разработчик *мыслит* о данных (логическая структура), а не побитовое физическое хранение (например, сжатые или тайловые форматы, которые находятся вне рамок спецификации).
*   **Интероперабельность:** Спецификация разработана так, чтобы её можно было легко реализовать в любом языке программирования и сериализовать в распространенные форматы, такие как JSON.

## 3. Основные компоненты

### 3.1. `ImageAxis` (Перечисление)

Представляет именованную логическую ось данных изображения.

*   `HEIGHT`: Вертикальная ось.
*   `WIDTH`: Горизонтальная ось.
*   `CHANNELS`: Ось, содержащая цветовые или информационные каналы.
*   `DEPTH`: Ось глубины для объемных 3D-изображений.
*   *Реализации могут быть расширены другими осями, такими как `TIME` или `BATCH`.*

### 3.2. `AxisDirection` (Перечисление)

Представляет семантическое направление пространственной оси, определяя положение начала координат (0) и направление возрастания значений.

*   `DOWN`: Для оси `HEIGHT`. Начало координат вверху, значения увеличиваются вниз (типично для компьютерного зрения).
*   `UP`: Для оси `HEIGHT`. Начало координат внизу, значения увеличиваются вверх (типично для графических API, таких как OpenGL).
*   `RIGHT`: Для оси `WIDTH`. Начало координат слева, значения увеличиваются вправо.
*   `LEFT`: Для оси `WIDTH`. Начало координат справа, значения увеличиваются влево.
*   `FORWARD`: Для оси `DEPTH`. Начало координат спереди, значения увеличиваются "вглубь" от зрителя.
*   `BACKWARD`: Для оси `DEPTH`. Начало координат сзади, значения увеличиваются "к" зрителю.
*   `SYMMETRIC`: Указывает, что ось симметрична, и операция ориентации/отражения не имеет смысла.

### 3.3. `ChannelFormat` (Строка или Перечисление)

Представляет семантическое значение и порядок каналов вдоль оси `CHANNELS`.

*   **Предположение:** Эта спецификация применяется к структурам, где каждый канал является отдельным элементом массива, а не к форматам с упакованными пикселями (например, R5G6B5).
*   **Примеры:** `"RGB"`, `"RGBA"`, `"BGR"`, `"BGRA"`, `"LUMINANCE"` (для одноканальных изображений).

### 3.4. `MemoryOrder` (Перечисление)

Определяет, как логические оси отображаются на линейную память. Это определяет, какая ось является "самой быстрой" (т.е. её элементы непрерывны в памяти).

*   `ROW_MAJOR` (стиль C): **Последняя** ось в `axis_order` является самой быстрой.
*   `COLUMN_MAJOR` (стиль Fortran): **Первая** ось в `axis_order` является самой быстрой.

### 3.5. `ImageLayout` (Структура / Класс)

Центральный, составной объект, который полностью описывает структуру.

*   `axis_order: Tuple[ImageAxis]`
    *   Упорядоченный кортеж, определяющий логический порядок осей. Пример: `(HEIGHT, WIDTH, CHANNELS)`.
*   `memory_order: MemoryOrder`
    *   Порядок в памяти, используемый для интерпретации `axis_order`.
*   `directions: Dict[ImageAxis, AxisDirection]`
    *   Словарь, указывающий направление для каждой пространственной оси. Пример: `{HEIGHT: DOWN, WIDTH: RIGHT}`.
*   `channels: ChannelFormat`
    *   Описание формата каналов.

## 4. Область применения

### В рамках спецификации

*   Описание плотных, непрерывных, N-мерных массивов.
*   Логическая топология (порядок и взаимосвязь осей).
*   Логическая ориентация (направление осей).

### Вне рамок спецификации

*   **Тип данных пикселя:** Тип данных (например, `uint8`, `float32`) считается ортогональным и обрабатывается нативной системой типов целевого языка/библиотеки (например, `numpy.dtype`).
*   **Цветовое пространство:** Цветовое пространство (например, `sRGB`, `Linear`) считается отдельным семантическим свойством данных пикселя, а не его топологической структурой.
*   **Сложные физические форматы хранения:** Форматы с упакованными пикселями, сжатые форматы (JPEG, BCn), планарные форматы (YUV420p) или тайловые/чересстрочные форматы памяти не описываются этой спецификацией.
